<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="generator" content="pandoc" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, user-scalable=yes"
		/>
		   		<meta name="description" content="NotAShelf's notes on various topics" />
				<title>Posts - System Backlight</title>
		<style>
			code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
/* The extra [class] is a hack that increases specificity enough to
   override a similar rule in reveal.js */
ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
  font-size: inherit;
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
		</style>
				<link rel="stylesheet" href="/home/runner/work/blog.notashelf.dev/blog.notashelf.dev/templates/style.css" />
				<!-- Begin Lineicons import -->
		<link
			rel="stylesheet"
			href="https://cdn.lineicons.com/4.0/lineicons.css"
		/>
		<!-- End Lineicons import-->
		<link rel="stylesheet" href="/style.css" />
	</head>
	<body>
		<header>
			<nav class="primary-buttons">
				<ul>
					<li><a class="nav-button" href="/">Index</a></li>
				</ul>
			</nav>
			<nav class="secondary-buttons">
				<ul>
					<li>
						<div class="dropdown">
							<button class="nav-button">Posts</button>
							<div
								class="dropdown-content"
								id="dropdown-content"
							></div>
						</div>
						<a class="nav-button" href="/pages/about.html">
							About
						</a>
						<a class="nav-button" href="/pages/privacy.html">
							Privacy
						</a>
					</li>
				</ul>
			</nav>
		</header>

		<main>
						<nav id="TOC" role="doc-toc">
				 <ul>
<li><a href="#system-backlight" id="toc-system-backlight">System
Backlight</a>
<ul>
<li><a href="#the-problem" id="toc-the-problem">The Problem</a></li>
<li><a href="#the-solution" id="toc-the-solution">The solution</a></li>
<li><a href="#lessons-learned" id="toc-lessons-learned">Lessons
learned</a></li>
</ul></li>
</ul>
			</nav>
			 <h1 id="system-backlight">System Backlight</h1>
<h2 id="the-problem">The Problem</h2>
<p>Following a large system upgrade two days ago, my HP Pavilion laptop
has stopped registering the <code>intel_backlight</code> device
interface in <code>/sys/class/backlight</code> - which is most often
used by tools such as <code>brightnessctl</code> or <code>light</code>
to control active backlight level. Instinctively looking at the result
of <code>dmesg</code>, I came across an insanely vague error message
that the kernel was unable to load some modules. Thanks, I guess?</p>
<h2 id="the-solution">The solution</h2>
<p>After some _ very extensive_ research, obviously on Google as every
other confused Linux user would do, I came across this <a
href="https://www.linuxquestions.org/questions/slackware-14/brightness-keys-not-working-after-updating-to-kernel-version-6-a-4175720728/">forum
post</a> that mentioned a change in backlight behaviour sometime after
kernel version <code>6.1.4</code>. Fortunately for me, the article was
also referring to the ever so informative Archwiki that instructed
passing one of the three <a
href="https://wiki.archlinux.org/title/backlight#Kernel_command-line_options">kernel
command-line options</a> depending on our needs.</p>
<p>What I did not know at the time was that when I upgraded my kernel
from <code>6.1.3</code> to <code>6.1.6</code> with a
<code>nix flake update</code>, the <code>acpi_backlight=none</code>
parameter had made it so that it would skip loading Intel backlight
<em>entirely</em>. Simply switching this parameter to
<code>acpi_backlight=native</code> as per the article above has fixed
the issue.</p>
<h2 id="lessons-learned">Lessons learned</h2>
<p>Linux devs are nerds.</p> 
		</main>
		<footer>
			<div class="footer-divider"></div>
			<p>&copy; <span id="copyright"></span> NotAShelf</p>
			<div class="footer-icons">
				<a href="https://github.com/notashelf">
					<i class="lni lni-github-original" title="GitHub"></i>
				</a>
			</div>
		</footer>
		<script>
			// Update the copyright text
			const currentYear = new Date().getFullYear();
			const copyrightYear =
				currentYear !== 2024 ? "2024 - " + currentYear : "2024";

			document.getElementById("copyright").textContent = copyrightYear;

			// Dropdown post listing
			function fetchPosts() {
				fetch("/posts/posts.json")
					.then((response) => response.json())
					.then((data) => {
						const dropdownContent =
							document.getElementById("dropdown-content");
						data.posts.forEach((post) => {
							const postLink = document.createElement("a");
							postLink.textContent = post.title;
							// we could use posts.url here, instead of posts.path
							// but it messes with local serving, which prefers `/`
							// to the actual URL, as it would point to the live site
							// by path
							postLink.href = post.path;
							dropdownContent.appendChild(postLink);
						});
					})
					.catch((error) =>
						console.error("Error fetching posts:", error),
					);
			}

			document.addEventListener("DOMContentLoaded", () => {
				fetchPosts();
			});
		</script>
	</body>
</html>
